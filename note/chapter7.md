# 第7章 データの取得
データベースの作成とシードが完了したので、アプリケーションのデータを取得するさまざまな方法について説明し、ダッシュボードの概要ページを作成しましょう。

## この章では...

この章で扱うトピックは以下のとおりです。

* データを取得するためのいくつかのアプローチについて学びます： API、ORM、SQL など。
* Server Components を使用すると、バックエンドのリソースにより安全にアクセスできるようになります。
* ネットワーク・ウォーターフォールとは何か
* JavaScriptパターンを使って並列データフェッチを実装する方法

## データ取得方法の選択
### APIレイヤー
APIは、アプリケーション・コードとデータベースの間の中間層です。APIを使うケースはいくつかある

APIを提供しているサードパーティーのサービスを利用している場合。
クライアントからデータを取得する場合、データベースの秘密がクライアントに公開されないように、サーバー上で動作するAPIレイヤーを用意したい。
Next.jsでは、ルートハンドラを使ってAPIエンドポイントを作成できます。

### データベースクエリ
フルスタックのアプリケーションを作るときには、データベースとやりとりするロジックも書く必要があります。Postgresのようなリレーショナルデータベースの場合、SQLやORMを使ってこれを行うことができます。

データベースのクエリを書かなければならないケースもいくつかある

* APIエンドポイントを作成する際に、データベースとやり取りするロジックを記述する必要があります。
* React Server Components（サーバー上でデータを取得する）を使用している場合は、APIレイヤーをスキップして、データベースの秘密をクライアントに公開するリスクを冒すことなく、データベースに直接問い合わせることができます。

それでは、React Server Componentsについて詳しく説明しよう。

## データ取得にServer Componentsを使用する
デフォルトでは、Next.jsアプリケーションはReact Server Componentsを使用します。Server Componentsを使用したデータ取得は比較的新しいアプローチですが、Server Componentsを使用する利点がいくつかあります

Server Componentsはpromiseをサポートし、データ取得のような非同期タスクのためのシンプルなソリューションを提供します。useEffectやuseState、データ取得ライブラリに手を伸ばすことなく、async/await構文を使用できます。

Server Componentsはサーバー上で実行されるため、高価なデータ取得やロジックをサーバー上に保持し、結果のみをクライアントに送信することができます。

前述のように、Server Componentsはサーバー上で実行されるため、APIレイヤーを追加することなく、データベースに直接問い合わせることができます。
